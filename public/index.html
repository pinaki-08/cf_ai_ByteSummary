<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ByteSummary - Tech Blog Aggregator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <header class="header">
    <div class="logo">
      <span class="logo-icon">âš¡</span>
      <span>ByteSummary</span>
    </div>
    <div class="header-right">
      <div id="auth-section">
        <button class="auth-btn" onclick="showAuthModal()">Sign In</button>
      </div>
    </div>
  </header>

  <div class="main-container">
    <aside class="sidebar">
      <div class="sidebar-section">
        <h3 class="sidebar-title">Sources</h3>
        <div id="source-filters">
          <button class="filter-btn active" data-source="all" onclick="setSourceFilter('all')">
            <span class="filter-icon">ğŸ“š</span>
            <span>All Sources</span>
          </button>
          <button class="filter-btn" data-source="meta" onclick="setSourceFilter('meta')">
            <span class="filter-icon">ğŸ”µ</span>
            <span>Meta Engineering</span>
          </button>
          <button class="filter-btn" data-source="uber" onclick="setSourceFilter('uber')">
            <span class="filter-icon">âš«</span>
            <span>Uber Engineering</span>
          </button>
          <button class="filter-btn" data-source="cloudflare" onclick="setSourceFilter('cloudflare')">
            <span class="filter-icon">ğŸŸ </span>
            <span>Cloudflare Engineering</span>
          </button>
          <button class="filter-btn" data-source="microsoft" onclick="setSourceFilter('microsoft')">
            <span class="filter-icon">ğŸŸ¦</span>
            <span>Microsoft DevBlogs</span>
          </button>
        </div>
      </div>

      <div class="sidebar-section">
        <h3 class="sidebar-title">Categories</h3>
        <div id="category-filters">
          <button class="filter-btn active" data-category="all" onclick="setCategoryFilter('all')">
            <span class="filter-icon">ğŸ“š</span>
            <span>All Topics</span>
          </button>
          <button class="filter-btn" data-category="ml" onclick="setCategoryFilter('ml')">
            <span class="filter-icon">ğŸ¤–</span>
            <span>Machine Learning</span>
          </button>
          <button class="filter-btn" data-category="engineering" onclick="setCategoryFilter('engineering')">
            <span class="filter-icon">âš™ï¸</span>
            <span>Engineering</span>
          </button>
          <button class="filter-btn" data-category="infrastructure" onclick="setCategoryFilter('infrastructure')">
            <span class="filter-icon">ğŸ—ï¸</span>
            <span>Infrastructure</span>
          </button>
          <button class="filter-btn" data-category="data" onclick="setCategoryFilter('data')">
            <span class="filter-icon">ğŸ“Š</span>
            <span>Data</span>
          </button>
          <button class="filter-btn" data-category="mobile" onclick="setCategoryFilter('mobile')">
            <span class="filter-icon">ğŸ“±</span>
            <span>Mobile</span>
          </button>
          <button class="filter-btn" data-category="web" onclick="setCategoryFilter('web')">
            <span class="filter-icon">ğŸŒ</span>
            <span>Web</span>
          </button>
        </div>
      </div>

      <div class="sidebar-section">
        <h3 class="sidebar-title">Timeframe</h3>
        <select class="filter-select" id="days-filter" onchange="setDaysFilter(this.value)">
          <option value="7" selected>Last 7 days</option>
          <option value="14">Last 14 days</option>
          <option value="30">Last 30 days</option>
          <option value="90">Last 90 days</option>
        </select>
      </div>

      <button class="refresh-btn" id="refresh-btn" onclick="refreshBlogs()">
        <span class="refresh-icon">ğŸ”„</span>
        <span>Fetch Latest Blogs</span>
      </button>

      <button class="clear-cache-btn" id="clear-cache-btn" onclick="clearCache()">
        <span>ğŸ—‘ï¸</span>
        <span>Clear Cache</span>
      </button>

      <!-- Custom Sources Section (only for logged in users) -->
      <div class="add-source-section" id="custom-sources-section" style="display: none;">
        <h3 class="sidebar-title">My Sources</h3>
        <div id="custom-sources-list"></div>
        <button class="add-source-btn" id="add-source-btn" onclick="showAddSourceForm()">
          <span>â•</span>
          <span>Add Custom Source</span>
        </button>
        <div class="add-source-form" id="add-source-form" style="display: none;">
          <div class="form-group">
            <label class="form-label">Source Name *</label>
            <input type="text" class="form-input" id="source-name" placeholder="e.g., Netflix Tech Blog">
          </div>
          <div class="form-group">
            <label class="form-label">Blog URL *</label>
            <input type="url" class="form-input" id="source-url" placeholder="https://netflixtechblog.com">
          </div>
          <div class="form-group">
            <label class="form-label">Icon</label>
            <div class="emoji-picker" id="emoji-picker">
              <span class="emoji-option selected" data-emoji="ğŸ“°">ğŸ“°</span>
              <span class="emoji-option" data-emoji="ğŸ”´">ğŸ”´</span>
              <span class="emoji-option" data-emoji="ğŸŸ¢">ğŸŸ¢</span>
              <span class="emoji-option" data-emoji="ğŸŸ£">ğŸŸ£</span>
              <span class="emoji-option" data-emoji="ğŸŸ¤">ğŸŸ¤</span>
              <span class="emoji-option" data-emoji="âšª">âšª</span>
              <span class="emoji-option" data-emoji="ğŸ’»">ğŸ’»</span>
              <span class="emoji-option" data-emoji="ğŸš€">ğŸš€</span>
              <span class="emoji-option" data-emoji="â­">â­</span>
              <span class="emoji-option" data-emoji="ğŸ”§">ğŸ”§</span>
            </div>
          </div>
          <div class="add-source-actions">
            <button class="add-source-cancel" onclick="hideAddSourceForm()">Cancel</button>
            <button class="add-source-submit" onclick="submitAddSource()">Add Source</button>
          </div>
        </div>
      </div>

      <!-- Job Status Panel -->
      <div class="job-status" id="job-status">
        <div class="job-status-header">
          <span class="job-status-title">Fetch Status</span>
          <span class="job-status-badge idle" id="job-badge">Idle</span>
        </div>
        <div class="job-status-message" id="job-message">Click "Fetch Latest Blogs" to start</div>
        <div class="job-status-sources" id="job-sources"></div>
        <div class="job-progress-bar" id="job-progress-bar" style="display: none;">
          <div class="job-progress-fill" id="job-progress-fill" style="width: 0%"></div>
        </div>
      </div>
    </aside>

    <main class="content">
      <div class="content-header">
        <h1 class="content-title">Tech Blog Summaries</h1>
        <span class="blog-count" id="blog-count">Loading...</span>
      </div>

      <div id="blog-container">
        <div class="loading-spinner">
          <div class="spinner"></div>
          <span>Loading blog summaries...</span>
        </div>
      </div>
    </main>
  </div>

  <!-- Blog Detail Modal -->
  <div class="modal-overlay" id="blog-modal" onclick="closeBlogModal(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title"></h2>
        <button class="modal-close" onclick="closeBlogModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-meta" id="modal-meta"></div>
        <div class="modal-section">
          <h3 class="modal-section-title">ğŸ“ Summary</h3>
          <p class="modal-summary" id="modal-summary"></p>
        </div>
        <div class="modal-section">
          <h3 class="modal-section-title">ğŸ¯ Key Points</h3>
          <ul class="key-points" id="modal-key-points"></ul>
        </div>
        <div class="modal-section" id="modal-tech-section">
          <h3 class="modal-section-title">ğŸ› ï¸ Technologies</h3>
          <div class="tech-tags" id="modal-technologies"></div>
        </div>
      </div>
      <div class="modal-footer">
        <a class="view-original-btn" id="modal-link" href="#" target="_blank" rel="noopener">
          View Original Article â†’
        </a>
      </div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="modal-overlay auth-modal" id="auth-modal" onclick="closeAuthModal(event)">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="auth-tabs">
        <button class="auth-tab active" id="login-tab" onclick="showLoginForm()">Sign In</button>
        <button class="auth-tab" id="register-tab" onclick="showRegisterForm()">Create Account</button>
      </div>
      <form class="auth-form" id="login-form" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label class="form-label" for="login-email">Email</label>
          <input type="email" class="form-input" id="login-email" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="login-password">Password</label>
          <input type="password" class="form-input" id="login-password" required>
        </div>
        <div class="form-error" id="login-error"></div>
        <button type="submit" class="form-submit">Sign In</button>
      </form>
      <form class="auth-form" id="register-form" style="display: none;" onsubmit="handleRegister(event)">
        <div class="form-group">
          <label class="form-label" for="register-name">Name</label>
          <input type="text" class="form-input" id="register-name" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="register-email">Email</label>
          <input type="email" class="form-input" id="register-email" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="register-password">Password</label>
          <input type="password" class="form-input" id="register-password" required minlength="6">
        </div>
        <div class="form-error" id="register-error"></div>
        <button type="submit" class="form-submit">Create Account</button>
      </form>
    </div>
  </div>

  <!-- Toast Notifications Container -->
  <div id="toast-container" class="toast-container"></div>

  <script src="/js/app.js"></script>
</body>
</html>
